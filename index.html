<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TopiaBets - Multi-Game</title>
<style>
  body {
    margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #1f2937, #111827);
    color: #fff;
  }
  header {
    background: #111827;
    padding: 1rem 2rem;
    display: flex; justify-content: space-between; align-items: center;
    box-shadow: 0 0 10px #000;
  }
  header h1 {
    margin: 0; color: #60a5fa;
  }
  .balance {
    font-weight: bold; font-size: 1.2rem;
  }
  nav {
    background: #1e293b;
    padding: 0.75rem 2rem;
    display: flex;
    gap: 1.5rem;
  }
  nav button {
    background: transparent;
    border: none;
    color: #9ca3af;
    font-weight: bold;
    font-size: 1rem;
    cursor: pointer;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    transition: background-color 0.25s, color 0.25s;
  }
  nav button:hover,
  nav button.active {
    background-color: #3b82f6;
    color: white;
  }
  main > section {
    display: none;
    padding: 2rem;
    max-width: 600px;
    margin: auto;
    background: #1e293b;
    border-radius: 1rem;
    box-shadow: 0 0 20px rgba(0,0,0,0.4);
  }
  main > section.active {
    display: block;
  }
  button.play-btn {
    background-color: #3b82f6;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 9999px;
    color: white;
    font-weight: bold;
    cursor: pointer;
    margin-top: 1rem;
    transition: background-color 0.3s;
  }
  button.play-btn:hover {
    background-color: #2563eb;
  }
  /* Mines grid */
  .grid {
    display: grid;
    grid-template-columns: repeat(5, 50px);
    gap: 0.5rem;
    margin-top: 1rem;
  }
  .cell {
    width: 50px; height: 50px;
    background-color: #374151;
    border-radius: 0.5rem;
    display: flex; justify-content: center; align-items: center;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s;
  }
  .cell.revealed {
    background-color: #10b981;
  }
  .cell.mine {
    background-color: #ef4444;
  }

  /* Tower grid and floors - Uusi tyylitys */
  .tower {
    display: grid;
    grid-template-columns: repeat(4, 80px);
    grid-template-rows: repeat(12, 50px);
    gap: 8px;
    margin-top: 1rem;
    justify-content: center;
    background: #222;
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 0 15px #00ff99aa;
  }
  .floor {
    background: #333;
    border-radius: 8px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: 1.1rem;
    color: #0f0;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease, transform 0.2s ease;
    box-shadow: inset 0 0 5px #00ff99;
  }
  .floor:hover {
    background-color: #00ff99;
    color: #121212;
    transform: scale(1.05);
  }
  .floor.selected {
    background-color: #22c55e;
    color: #121212;
    cursor: default;
    box-shadow: 0 0 12px #22c55e;
    transform: scale(1.1);
  }
  .floor.bomb {
    background-color: #8b0000 !important;
    color: #fff !important;
    cursor: default;
    box-shadow: 0 0 15px #ff0000;
    transform: scale(1.1);
  }
  .floor.disabled {
    pointer-events: none;
    opacity: 0.6;
    cursor: default;
  }
</style>
</head>
<body>

<header>
  <h1>TopiaBets</h1>
  <div class="balance">Balance: <span id="balance">1000</span> ðŸ’°</div>
</header>

<nav>
  <button class="nav-btn active" data-target="coinflip-section">Coinflip ðŸª™</button>
  <button class="nav-btn" data-target="mines-section">Mines ðŸ’£</button>
  <button class="nav-btn" data-target="tower-section">Tower ðŸ—¼</button>
</nav>

<main>
  <!-- Coinflip -->
  <section id="coinflip-section" class="active">
    <h2>Coinflip</h2>
    <p>Choose heads or tails and try your luck!</p>
    <button class="play-btn" id="coinflip-play">Flip Coin</button>
  </section>

  <!-- Mines -->
  <section id="mines-section">
    <h2>Mines</h2>
    <p>Avoid the mines and win rewards!</p>
    <div class="grid" id="minesGrid"></div>
    <button class="play-btn" id="mines-reset">Reset</button>
  </section>

  <!-- Tower -->
  <section id="tower-section">
    <h2>Tower</h2>
    <p>Climb the tower floor by floor and win prizes!</p>
    <div class="tower" id="towerGame"></div>
    <button class="play-btn" id="tower-reset">Reset</button>
  </section>
</main>

<!-- Sounds for each game -->
<audio id="coinflip-sound" src="https://www.myinstants.com/media/sounds/coinflip.mp3" preload="auto" volume="0.3"></audio>
<audio id="coinflip-win" src="https://www.myinstants.com/media/sounds/mario-coin.mp3" preload="auto" volume="0.3"></audio>
<audio id="coinflip-lose" src="https://www.myinstants.com/media/sounds/fail-trombone.mp3" preload="auto" volume="0.3"></audio>

<audio id="mines-boom" src="https://www.myinstants.com/media/sounds/explosion.mp3" preload="auto" volume="0.2"></audio>
<audio id="mines-win" src="https://www.myinstants.com/media/sounds/coin.mp3" preload="auto" volume="0.2"></audio>

<audio id="tower-win" src="https://www.myinstants.com/media/sounds/mario-coin.mp3" preload="auto" volume="0.3"></audio>
<audio id="tower-lose" src="https://www.myinstants.com/media/sounds/fail-trombone.mp3" preload="auto" volume="0.3"></audio>

<script>
  // Navigation handling
  const navButtons = document.querySelectorAll('nav button');
  const sections = document.querySelectorAll('main > section');

  navButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      navButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      const target = btn.getAttribute('data-target');
      sections.forEach(section => {
        section.classList.toggle('active', section.id === target);
      });
    });
  });

  // Balance
  let balance = 1000;
  const balanceEl = document.getElementById('balance');

  function updateBalance(amount) {
    balance += amount;
    if(balance < 0) balance = 0;
    balanceEl.textContent = balance;
  }
  function updateBalanceDisplay() {
    balanceEl.textContent = balance;
  }

  // Coinflip Game
  const coinflipPlayBtn = document.getElementById('coinflip-play');
  const coinflipSound = document.getElementById('coinflip-sound');
  const coinflipWinSound = document.getElementById('coinflip-win');
  const coinflipLoseSound = document.getElementById('coinflip-lose');

  coinflipPlayBtn.addEventListener('click', () => {
    coinflipSound.volume = 0.3;
    coinflipSound.play();

    const win = Math.random() < 0.5;
    setTimeout(() => {
      if(win) {
        coinflipWinSound.volume = 0.3;
        coinflipWinSound.play();
        alert("You won 100!");
        updateBalance(100);
      } else {
        coinflipLoseSound.volume = 0.3;
        coinflipLoseSound.play();
        alert("You lost 100!");
        updateBalance(-100);
      }
    }, 1000);
  });

  // Mines Game
  const minesGrid = document.getElementById('minesGrid');
  const minesResetBtn = document.getElementById('mines-reset');
  const minesBoomSound = document.getElementById('mines-boom');
  const minesWinSound =
